#!/bin/sh

##########################################################################################################################################################
# Déclaration de la variable de test #
######################################
CONTENEUR=Collabora
IMAGE=collabora/code
HTTP=1121
RESTART=unless-stopped
IP_NAS=$(ip add | grep 192.168.1 | cut -d "/" -f 1 | cut -c 10-30)

##########################################################################################################################################################
# Fermeture du Conteneur #
##########################
docker container rm -f  $CONTENEUR

##########################################################################################################################################################
# Lancement du Conteneur #
##########################
docker create -i -t           \
--name=$CONTENEUR             \
--restart $RESTART            \
--net=bridge                  \
--hostname $CONTENEUR         \
--env server_name="Collabora" \
--env domain="$IP_NAS"        \
--env username="admin"        \
--env password="admin"        \
--publish $HTTP:9980          \
$IMAGE:latest

##########################################################################################################################################################
# Démarrage du Conteneur #
##########################
docker start $CONTENEUR

##########################################################################################################################################################
# Code Retour en Fermeture #
############################
exit 0
